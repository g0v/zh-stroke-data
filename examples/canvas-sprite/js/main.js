// Generated by LiveScript 1.3.0
$(function(){
  var SpriteStroker, PrintingStroker, ss, ps, $sprite, $printing, $sdelay, $cdelay, $speed, $stroke, $char, $arrows, $debug, src, inputChanged, $progress, update;
  SpriteStroker = zhStrokeData.SpriteStroker, PrintingStroker = zhStrokeData.PrintingStroker;
  $sprite = $('#sprite');
  $printing = $('#printing');
  $sdelay = $('#sdelay');
  $cdelay = $('#cdelay');
  $speed = $('#speed');
  $stroke = $('#stroke');
  $char = $('#char');
  $arrows = $('#arrows');
  $debug = $('#debug');
  src = {
    moe: {
      url: '../../json/'
    },
    scanline: {
      url: './',
      dataType: 'txt'
    }
  };
  inputChanged = function(it){
    $sprite.empty();
    ss = new SpriteStroker(it, src.scanline);
    $('#sprite').append(ss.domElement);
    $speed.val(ss.speed);
    $stroke.val(ss.strokeDelay);
    $sdelay.text(ss.strokeDelay);
    $char.val(ss.charDelay);
    $cdelay.text(ss.charDelay);
    $arrows.attr('checked', ss.arrows);
    $debug.attr('checked', ss.debug);
    $printing.empty();
    ps = new PrintingStroker(it, src.scanline);
    return $('#printing').append(ps.domElement);
  };
  $speed.change(function(){
    if (ss != null) {
      ss.speed = +$(this).val();
    }
  });
  $stroke.change(function(){
    if (ss != null) {
      ss.strokeDelay = +$(this).val();
    }
    $sdelay.text(ss != null ? ss.strokeDelay : void 8);
  });
  $char.change(function(){
    if (ss != null) {
      ss.charDelay = +$(this).val();
    }
    $cdelay.text(ss != null ? ss.charDelay : void 8);
  });
  $arrows.change(function(){
    if (ss != null) {
      ss.arrows = this.checked;
    }
  });
  $debug.change(function(){
    if (ss != null) {
      ss.debug = this.checked;
    }
  });
  $('#play').click(function(){
    if (ss != null) {
      ss.pause(false);
    }
    if (ss != null) {
      ss.play();
    }
  });
  $('#pause').click(function(){
    if (ss != null) {
      ss.pause(true);
    }
  });
  $('#words').change(function(){
    inputChanged($(this).val());
  }).change();
  $progress = $('#progress');
  update = function(){
    $progress.val(ss != null ? ss.currentTime : void 8);
    requestAnimationFrame(update);
  };
  return requestAnimationFrame(update);
});